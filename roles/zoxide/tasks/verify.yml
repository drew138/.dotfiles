---
- name: locate zoxide binary
  command: which zoxide
  register: verify_zoxide_which
  changed_when: false
  failed_when: false

- name: check if zoxide binary exists
  stat:
    path: "{{ verify_zoxide_which.stdout }}"
  register: verify_zoxide_bin
  when: verify_zoxide_which.rc == 0

- name: assert zoxide binary is present and executable
  assert:
    that:
      - verify_zoxide_bin.stat is defined
      - verify_zoxide_bin.stat.exists
      - verify_zoxide_bin.stat.executable
    fail_msg: zoxide binary was not found in the PATH or is not executable
