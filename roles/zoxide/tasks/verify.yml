---
- name: verify zoxide binary exists
  stat:
    path: "{{ ansible_facts.env.HOME }}/.local/bin/zoxide"
  register: verify_zoxide_bin

- name: assert zoxide binary is present and executable
  assert:
    that:
      - verify_zoxide_bin.stat.exists
      - verify_zoxide_bin.stat.executable
    fail_msg: "zoxide binary is missing or not executable at ~/.local/bin/zoxide"

- name: verify zoxide install directory exists
  stat:
    path: "{{ ansible_facts.env.HOME }}/.local/bin"
  register: verify_zoxide_dir

- name: assert zoxide install directory exists
  assert:
    that:
      - verify_zoxide_dir.stat.exists
      - verify_zoxide_dir.stat.isdir
    fail_msg: "~/.local/bin directory does not exist"
