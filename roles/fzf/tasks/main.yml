---
- name: clone fzf repo
  become: true
  become_user: "{{ ansible_facts.env.USER }}"
  changed_when: false
  git:
    repo: "https://github.com/junegunn/fzf.git"
    dest: "{{ ansible_facts.env.HOME }}/.fzf"
    depth: 1
    clone: true
    update: true

- name: install fzf
  become: true
  become_user: "{{ ansible_facts.env.USER }}"
  command: "{{ ansible_facts.env.HOME }}/.fzf/install"
  changed_when: false

- name: revert path changes
  shell: |
    git checkout .
  args:
    chdir: "{{ ansible_facts.env.HOME }}/.dotfiles"
  changed_when: false
