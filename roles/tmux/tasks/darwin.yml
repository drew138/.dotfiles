---
- name: install dependencies
  become_user: "{{ ansible_facts.env.USER }}"
  homebrew:
    name:
      - xclip
      - tmux
    state: latest
  notify:
    - install tmux plugins

- name: tmux package manager
  become_user: "{{ ansible_facts.env.USER }}"
  git:
    repo: "https://github.com/tmux-plugins/tpm.git"
    dest: "{{ ansible_facts.env.HOME }}/.tmux/plugins/tpm"
    depth: 1
    clone: true
    update: true
    force: true

- name: create .tmux.conf symlink
  file:
    src: "{{ ansible_facts.env.HOME }}/.dotfiles/roles/tmux/files/.tmux.conf"
    dest: "{{ ansible_facts.env.HOME }}/.tmux.conf"
    owner: "{{ ansible_facts.env.USER }}"
    state: link
    force: true
    follow: false
