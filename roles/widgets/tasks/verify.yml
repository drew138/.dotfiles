---
- name: Verify desktop widgets are hidden
  ansible.builtin.command: >
    defaults read com.apple.WindowManager StandardHideWidgets
  register: widgets_verify_hide
  changed_when: false
  failed_when: false

- name: Assert desktop widgets are hidden
  ansible.builtin.assert:
    that:
      - widgets_verify_hide.stdout | trim == "1"
    fail_msg: "Desktop widgets are NOT hidden"
    success_msg: "Desktop widgets are hidden"
